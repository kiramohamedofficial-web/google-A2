
@import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;500;700;900&display=swap');

:root {
  --font-family: 'Cairo', sans-serif;
  --border-radius: 8px;
  --border-radius-lg: 16px;
  --border-radius-pill: 50px;
  --transition-speed: 0.3s ease;
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
  --header-height: 65px;
}

body[data-theme="light"] {
  --bg-color: #f4f7fa;
  --bg-secondary-color: #ffffff;
  --text-color: #1a202c;
  --text-muted-color: #718096;
  --border-color: #e2e8f0;
  --accent-color: #3b82f6;
  --accent-rgb: 59, 130, 246;
  --accent-text-color: #ffffff;
  --accent-hover-color: #2563eb;
  --success-color: #48bb78;
  --error-color: #f56565;
  --info-color: #4299e1;
  --link-color: #3b82f6;
  --card-bg: #ffffff;
  --card-shadow: 0 4px 12px rgba(0,0,0,0.05);
  --input-bg: #f3f4f6;
  --ai-bubble-bg: #e2e8f0;
  --header-bg-rgba: 255, 255, 255;
  --header-text-color: #1a202c;
  --danger-bg: #fee2e2;
  --danger-border: #fca5a5;
  --danger-text: #b91c1c;
}

body[data-theme="dark"] {
  --bg-color: #1a202c;
  --bg-secondary-color: #2d3748;
  --text-color: #e2e8f0;
  --text-muted-color: #a0aec0;
  --border-color: #4a5568;
  --accent-color: #60a5fa;
  --accent-rgb: 96, 165, 250;
  --accent-text-color: #1a202c;
  --accent-hover-color: #93c5fd;
  --success-color: #68d391;
  --error-color: #fc8181;
  --info-color: #63b3ed;
  --link-color: #60a5fa;
  --card-bg: #2d3748;
  --card-shadow: 0 4px 12px rgba(0,0,0,0.2);
  --input-bg: #4a5568;
  --ai-bubble-bg: #4a5568;
  --header-bg-rgba: 45, 55, 72;
  --header-text-color: #e2e8f0;
  --danger-bg: #452323;
  --danger-border: #9b3939;
  --danger-text: #fca5a5;
}

body[data-theme="pink"] {
  --bg-color: #fdf2f8; 
  --bg-secondary-color: #ffffff;
  --text-color: #831843; 
  --text-muted-color: #be185d; 
  --border-color: #fbcfe8; 
  --accent-color: #ec4899; 
  --accent-rgb: 236, 72, 153;
  --accent-text-color: #ffffff;
  --accent-hover-color: #db2777; 
  --success-color: #db2777;
  --error-color: #e11d48;
  --info-color: #f472b6;
  --link-color: #ec4899;
  --card-bg: #ffffff;
  --card-shadow: 0 4px 12px rgba(219, 39, 119, 0.08);
  --input-bg: #fce7f3;
  --ai-bubble-bg: #fce7f3;
  --header-bg-rgba: 255, 255, 255;
  --header-text-color: #831843;
  --danger-bg: #fef1f2;
  --danger-border: #fecdd3;
  --danger-text: #be123c;
}


/* --- BASE & BODY --- */
* { box-sizing: border-box; }
html, body {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
body {
  margin: 0;
  font-family: var(--font-family);
  color: var(--text-color);
  background: var(--bg-color);
  transition: background-color var(--transition-speed), color var(--transition-speed);
}
body.modal-open { overflow: hidden; }

#root { min-height: 100vh; width: 100vw; position: relative; overflow-x: hidden; }
.icon { display: inline-flex; align-items: center; justify-content: center; }

h1, h2, h3, h4, h5, h6 {
  font-weight: 700;
  color: var(--text-color);
  margin-top: 0;
}
p {
  color: var(--text-muted-color);
  line-height: 1.6;
}
a { text-decoration: none; color: var(--link-color); transition: color var(--transition-speed); }
a:hover { color: var(--accent-hover-color); }

/* --- UTILITY & SHARED CLASSES --- */
.page-container {
  padding: 2rem;
  animation: fadeIn 0.5s ease-in-out;
  max-width: 1200px;
  margin: 0 auto;
}
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

.content-card {
  background: var(--card-bg);
  border-radius: var(--border-radius-lg);
  padding: 1.5rem 2rem;
  box-shadow: var(--card-shadow);
  border: 1px solid var(--border-color);
  transition: all var(--transition-speed);
}
.content-section-title {
  font-size: 1.75rem;
  margin-bottom: 1.5rem;
  display: flex;
  align-items: center;
  gap: 0.75rem;
}
.main-page-title {
  font-size: 2.25rem;
  font-weight: 900;
  margin-bottom: 2rem;
}
.no-content-message {
    text-align: center;
    padding: 3rem;
    font-size: 1.1rem;
    color: var(--text-muted-color);
    background-color: var(--bg-secondary-color);
    border-radius: var(--border-radius-lg);
    border: 1px dashed var(--border-color);
}
.content-grid {
    display: grid;
    gap: 1.5rem;
}

/* --- AUTH PAGE --- */
.auth-page {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: var(--bg-color);
  padding: 1rem;
}
.auth-container {
  width: 100%;
  max-width: 900px;
  min-height: 600px;
  display: flex;
  border-radius: var(--border-radius-lg);
  overflow: hidden;
  box-shadow: var(--shadow-lg);
}
.auth-branding {
  flex: 1;
  background: linear-gradient(135deg, var(--accent-color), var(--accent-hover-color));
  color: var(--accent-text-color);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 2rem;
  text-align: center;
}
.auth-branding h1 {
  font-size: 3rem;
  font-weight: 900;
  color: var(--accent-text-color);
  margin-bottom: 0.5rem;
}
.auth-branding p {
  font-size: 1.2rem;
  color: var(--accent-text-color);
  opacity: 0.9;
}
.auth-form-container {
  flex: 1;
  background-color: var(--bg-secondary-color);
  padding: 2rem;
  display: flex;
  flex-direction: column;
  justify-content: center;
}
.auth-form h2 {
    font-size: 1.75rem;
    margin-bottom: 0.5rem;
}
.auth-form p {
    margin-bottom: 1.5rem;
    color: var(--text-muted-color);
}
.auth-form input {
    width: 100%;
    padding: 0.9rem 1rem;
    border: 1px solid var(--border-color);
    background-color: var(--bg-color);
    border-radius: var(--border-radius);
    color: var(--text-color);
    font-family: var(--font-family);
    font-size: 1rem;
    margin-bottom: 1rem;
    transition: all var(--transition-speed);
}
.auth-form input:focus {
    outline: none;
    border-color: var(--accent-color);
    box-shadow: 0 0 0 3px rgba(var(--accent-rgb), 0.2);
}
.auth-form .btn {
    width: 100%;
    margin-top: 0.5rem;
    padding: 0.9rem;
}
.auth-link {
    display: block;
    text-align: center;
    margin-top: 1rem;
    font-size: 0.9rem;
    color: var(--link-color);
    cursor: pointer;
}
.auth-link strong {
    font-weight: 700;
}
.register-form .form-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0 1rem;
}
.register-form .form-grid input { margin-bottom: 1rem; }
.auth-error, .auth-success {
  padding: 0.75rem 1rem;
  border-radius: var(--border-radius);
  font-size: 0.9rem;
  margin-bottom: 1rem;
  text-align: center;
}
.auth-error { color: var(--error-color); background-color: color-mix(in srgb, var(--error-color) 15%, transparent); }
.auth-success { color: var(--success-color); background-color: color-mix(in srgb, var(--success-color) 15%, transparent); }

/* --- MAIN APP LAYOUT --- */
.app-container { display: flex; flex-direction: column; min-height: 100vh; }
.main-content {
  flex-grow: 1;
  padding-top: calc(var(--header-height) + 1.5rem);
}
.app-container:not(.is-public-view) .main-content {
    margin-right: 280px;
}

.app-header {
  position: fixed;
  top: 0;
  right: 0;
  left: 280px; /* Sidebar width */
  z-index: 1000;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 2rem;
  height: var(--header-height);
  background: rgba(var(--header-bg-rgba), 0.7);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border-bottom: 1px solid var(--border-color);
  transition: all var(--transition-speed);
}
.app-header h1 {
    font-size: 1.5rem;
    color: var(--header-text-color);
    font-weight: 900;
    margin: 0;
    cursor: pointer;
}
.header-icon-btn {
  background: transparent;
  border: none;
  border-radius: 50%;
  width: 44px;
  height: 44px;
  color: var(--text-muted-color);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
  padding: 0;
  position: relative;
}
.header-icon-btn:hover { background: var(--bg-color); color: var(--text-color); }
.header-icon-btn[aria-label="Open menu"] { display: none; } /* Hide on desktop */
.header-title {
    color: var(--text-color);
}

/* --- SIDEBAR --- */
.sidebar-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1001; transition: opacity var(--transition-speed); opacity: 0; pointer-events: none; }
.sidebar-overlay.open { opacity: 1; pointer-events: auto; }
.sidebar {
  position: fixed; top: 0; right: 0; width: 280px; height: 100vh;
  background: var(--bg-secondary-color);
  z-index: 1002;
  transition: transform var(--transition-speed);
  display: flex; flex-direction: column;
  border-left: 1px solid var(--border-color);
}
.sidebar-close-btn {
    position: absolute; top: 15px; left: 15px; background: none; border: none;
    width: 36px; height: 36px; color: var(--text-muted-color); cursor: pointer;
    font-size: 24px; z-index: 10; transition: all 0.2s; display: none;
}
.sidebar-profile-card {
    padding: 2rem 1rem 1.5rem; text-align: center; cursor: pointer;
    border-bottom: 1px solid var(--border-color); transition: all var(--transition-speed);
}
.sidebar-profile-card:hover { background: var(--bg-color); }
.profile-card-avatar-large {
    width: 72px; height: 72px; font-size: 2.5rem; margin: 0 auto 1rem;
    border: 3px solid var(--accent-color);
}
.sidebar-profile-card h3 { font-size: 1.2rem; color: var(--text-color); margin:0; }
.sidebar-profile-card p { font-size: 0.9rem; color: var(--text-muted-color); margin: 0.25rem 0 0; }
.sidebar-nav { flex-grow: 1; padding: 1rem; overflow-y: auto; }
.nav-item {
    display: flex; align-items: center; justify-content: space-between; gap: 1rem; padding: 0.8rem 1rem;
    color: var(--text-muted-color); text-decoration: none; cursor: pointer;
    transition: all 0.2s; border-radius: var(--border-radius); font-weight: 500;
    margin-bottom: 0.25rem;
}
.nav-item:hover { color: var(--text-color); background: var(--bg-color); }
.nav-item.active {
    color: var(--accent-text-color); font-weight: 700;
    background: var(--accent-color); box-shadow: 0 4px 10px rgba(var(--accent-rgb), 0.3);
}
.nav-item.active svg { stroke: var(--accent-text-color); }
.sidebar-divider { border: none; height: 1px; background-color: var(--border-color); margin: 1rem 0; }
.sidebar-footer { padding: 1rem; border-top: 1px solid var(--border-color); display:flex; flex-direction:column; gap: 1rem; }
.logout-btn {
    display: flex; align-items: center; justify-content: center; gap: 0.75rem; width: 100%;
    padding: 0.75rem; border: 1px solid var(--border-color); background: transparent; color: var(--text-muted-color);
    border-radius: var(--border-radius); font-size: 1rem; font-weight: 500; cursor: pointer; transition: all var(--transition-speed);
}
.logout-btn:hover { background: var(--danger-bg); color: var(--danger-text); border-color: var(--danger-border); }
.theme-switcher-container { display: flex; justify-content: space-between; align-items: center; }
.theme-switcher-label { color: var(--text-muted-color); font-size: 0.9rem; }
.theme-switcher { display: flex; gap: 0.5rem; }
.theme-switcher button {
    background: var(--bg-color); border: 1px solid var(--border-color); border-radius: var(--border-radius);
    padding: 0; width: 36px; height: 36px; cursor: pointer;
    color: var(--text-muted-color); font-size: 1rem;
    display: flex; align-items: center; justify-content: center;
}
.theme-switcher button.active { background: var(--accent-color); color: var(--accent-text-color); border-color: var(--accent-color); }
.sidebar-copyright { font-size: 0.75rem; color: var(--text-muted-color); text-align: center; padding-top: 0.5rem; cursor: pointer; }


/* --- DASHBOARD --- */
.dashboard-page .page-container { display: flex; flex-direction: column; gap: 2.5rem; }
.daily-ticker-bar {
  background: var(--card-bg); color: var(--text-color);
  padding: 0 1.5rem; display: flex; align-items: center; overflow: hidden; box-shadow: var(--card-shadow);
  height: 60px; border-radius: var(--border-radius-lg); border: 1px solid var(--border-color);
}
.ticker-icon { font-size: 1.5rem; margin-left: 1rem; animation: pulse 2s infinite; }
@keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
.ticker-wrapper-vertical { height: 100%; flex-grow: 1; position: relative; overflow: hidden; }
.ticker-content-vertical {
  position: absolute; top: 0; right: 0; width: 100%;
  animation: ticker-scroll-vertical 10s linear infinite;
}
.ticker-item-vertical {
  display: flex; align-items: center; justify-content: space-between; height: 60px; padding: 0 1rem;
  transition: background-color var(--transition-speed); cursor: pointer;
}
.ticker-item-vertical:hover { background-color: var(--bg-color); }
@keyframes ticker-scroll-vertical {
  0% { transform: translateY(0); }
  100% { transform: translateY(-100%); }
}

.weekly-schedule-wrapper { padding: 0; }
.horizontal-scroll-area { display: flex; gap: 1.5rem; overflow-x: auto; padding-bottom: 1.5rem; scroll-snap-type: x mandatory; }
.horizontal-scroll-area::-webkit-scrollbar { display: none; }
.day-card {
  flex: 0 0 320px; background: var(--card-bg); border: 1px solid var(--border-color); border-radius: var(--border-radius-lg);
  box-shadow: var(--card-shadow); padding: 1.25rem; display: flex; flex-direction: column; transition: all var(--transition-speed);
  position: relative; z-index: 1; scroll-snap-align: start;
}
.day-card:hover { transform: translateY(-8px) scale(1.03); box-shadow: 0 15px 30px rgba(var(--accent-rgb), 0.2); z-index: 10; border-color: var(--accent-color); }
.day-card-header { font-size: 1.2rem; margin: 0 0 1rem; padding-bottom: 0.75rem; border-bottom: 1px solid var(--border-color); font-weight: 700; color: var(--accent-color); }
.day-card-classes-list { display: flex; flex-direction: column; gap: 0.75rem; }
.class-list-item { display: flex; align-items: center; justify-content: space-between; padding: 0.75rem; border-radius: var(--border-radius); background: var(--bg-color); cursor: pointer; transition: all var(--transition-speed); }
.class-list-item:hover { transform: translateX(-5px); background: color-mix(in srgb, var(--accent-color) 8%, transparent); }
.class-list-item-details h4 { margin: 0 0 0.25rem; font-size: 1rem; color: var(--text-color); }
.class-list-item-details p { margin: 0; font-size: 0.8rem; color: var(--text-muted-color); }
.announcements-list { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 1.5rem; }
.post-card { background: var(--card-bg); border-radius: var(--border-radius-lg); box-shadow: var(--card-shadow); border: 1px solid var(--border-color); overflow: hidden; display: flex; flex-direction: column; }
.post-card-image { width: 100%; height: 200px; object-fit: cover; }
.post-card-content { padding: 1.5rem; flex-grow: 1; display: flex; flex-direction: column; }
.post-card-content h3 { font-size: 1.2rem; margin-bottom: 0.5rem; }
.post-card-content p { font-size: 0.95rem; margin-bottom: 1rem; flex-grow: 1; }
.post-card-date { font-size: 0.8rem; color: var(--text-muted-color); align-self: flex-end; }
.gallery-preview-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; }
.gallery-preview-item { height: 200px; border-radius: var(--border-radius); background-size: cover; background-position: center; position: relative; overflow: hidden; cursor: pointer; transition: transform var(--transition-speed); }
.gallery-preview-item:hover { transform: scale(1.05); }
.gallery-item-overlay { position: absolute; bottom: 0; left: 0; right: 0; padding: 1rem; background: linear-gradient(to top, rgba(0,0,0,0.8), transparent); color: white; transform: translateY(100%); transition: transform var(--transition-speed); }
.gallery-preview-item:hover .gallery-item-overlay { transform: translateY(0); }


/* --- MODALS --- */
.modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); backdrop-filter: blur(5px); z-index: 2000; display: flex; align-items: center; justify-content: center; animation: fadeIn 0.3s; padding: 1rem; }
.modal-container { background: var(--bg-secondary-color); border-radius: var(--border-radius-lg); box-shadow: var(--shadow-lg); width: 100%; max-width: 500px; animation: slideInUp 0.3s; overflow: hidden; display: flex; flex-direction: column; max-height: 90vh; }
@keyframes slideInUp { from { opacity: 0; transform: translateY(30px) scale(0.98); } to { opacity: 1; transform: translateY(0) scale(1); } }
.modal-header { display: flex; justify-content: space-between; align-items: center; padding: 1rem 1.5rem; border-bottom: 1px solid var(--border-color); flex-shrink: 0; }
.modal-header h3 { font-size: 1.25rem; margin: 0; }
.modal-body { padding: 1.5rem; overflow-y: auto; }
.modal-footer { padding: 1rem 1.5rem; border-top: 1px solid var(--border-color); display: flex; justify-content: flex-end; gap: 1rem; background-color: var(--bg-color); flex-shrink: 0; }
.close-btn { background: none; border: none; cursor: pointer; color: var(--text-muted-color); padding: 0.5rem; font-size: 1.5rem; line-height: 1; transition: color var(--transition-speed); }
.close-btn:hover { color: var(--text-color); }

.class-detail-modal .modal-body { position: relative; }
.class-detail-modal h2 { font-size: 1.75rem; margin: 0 0 1.5rem; color: var(--accent-color); }
.class-detail-modal p { font-size: 1.1rem; padding: 0.75rem 0; border-bottom: 1px solid var(--border-color); }
.class-detail-modal p:last-child { border-bottom: none; }
.class-detail-modal p strong { color: var(--text-color); margin-left: 0.5rem; }
.review-badge-popup {
    position: absolute; top: 1.5rem; left: 1.5rem; background-color: var(--info-color);
    color: #fff; padding: 0.25rem 0.75rem; border-radius: var(--border-radius-pill);
    font-size: 0.8rem; font-weight: 700;
}

.teacher-detail-modal .modal-body { text-align: center; padding: 2rem 1.5rem; }
.teacher-detail-image {
  width: 120px; height: 120px; border-radius: 50%; object-fit: cover; margin: 0 auto 1.5rem;
  border: 4px solid var(--bg-color); box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}
.teacher-detail-modal h2 { font-size: 1.75rem; margin: 0 0 0.5rem; }
.teacher-detail-subject { font-size: 1.1rem; color: var(--accent-color); font-weight: 500; margin-bottom: 1rem; }
.teacher-detail-phone {
  display: inline-flex; align-items: center; gap: 0.75rem; padding: 0.5rem 1rem;
  background-color: var(--bg-color); border-radius: var(--border-radius-pill);
}

.confirmation-modal .confirmation-message { font-size: 1.1rem; }


/* --- FAB & CHAT MODAL --- */
.fab {
    position: fixed; bottom: 2rem; left: 2rem; width: 60px; height: 60px; border-radius: 50%;
    background: var(--accent-color); color: var(--accent-text-color); border: none; cursor: pointer;
    display: flex; align-items: center; justify-content: center; box-shadow: var(--shadow-lg);
    z-index: 1000; transition: all var(--transition-speed);
}
.fab:hover { transform: translateY(-4px) scale(1.05); box-shadow: 0 12px 20px rgba(var(--accent-rgb), 0.3); }
.chat-modal { max-width: 450px; height: 80vh; max-height: 600px; }
.chat-body { flex-grow: 1; padding: 1rem; display: flex; flex-direction: column; gap: 0.75rem; }
.chat-bubble { padding: 0.75rem 1rem; border-radius: var(--border-radius-lg); max-width: 80%; line-height: 1.5; }
.chat-bubble.user { background: var(--accent-color); color: var(--accent-text-color); border-bottom-left-radius: 4px; align-self: flex-start; }
.chat-bubble.ai { background: var(--ai-bubble-bg); color: var(--text-color); border-bottom-right-radius: 4px; align-self: flex-end; }
.typing-indicator span { height: 8px; width: 8px; border-radius: 50%; background-color: var(--text-muted-color); display: inline-block; animation: wave 1.3s infinite; }
.typing-indicator span:nth-of-type(2) { animation-delay: -1.1s; }
.typing-indicator span:nth-of-type(3) { animation-delay: -0.9s; }
@keyframes wave { 0%, 60%, 100% { transform: initial; } 30% { transform: translateY(-8px); } }
.chat-footer { padding: 0.75rem; }
.chat-input-form { display: flex; gap: 0.5rem; }
.chat-input-form input { flex-grow: 1; border-radius: var(--border-radius); padding: 0.75rem 1rem; border: 1px solid var(--border-color); background: var(--bg-color); }
.chat-input-form button {
    flex-shrink: 0; width: 44px; height: 44px; border: none; background: var(--accent-color); color: var(--accent-text-color);
    border-radius: var(--border-radius); cursor: pointer; display: flex; align-items: center; justify-content: center; transition: background-color var(--transition-speed);
}
.chat-input-form button:hover:not(:disabled) { background: var(--accent-hover-color); }
.chat-input-form button:disabled { background: var(--text-muted-color); cursor: not-allowed; opacity: 0.7; }

/* Loading Spinner */
.loading-overlay { display: flex; justify-content: center; align-items: center; position: fixed; inset: 0; background-color: rgba(var(--bg-color-rgb), 0.5); z-index: 5000; }
.loading-spinner { width: 40px; height: 40px; border: 4px solid color-mix(in srgb, var(--accent-color) 30%, transparent); border-top-color: var(--accent-color); border-radius: 50%; animation: spin 1s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }
.loading-screen { display: flex; justify-content: center; align-items: center; width: 100vw; height: 100vh; background-color: var(--bg-color); }
.loading-screen .loading-spinner { width: 60px; height: 60px; }


/* --- ADMIN PAGE --- */
.admin-page .page-container { max-width: none; }
.admin-layout {
    display: flex;
    gap: 2rem;
    align-items: flex-start;
}
.admin-sidebar {
    flex: 0 0 240px;
    background-color: var(--card-bg);
    border-radius: var(--border-radius-lg);
    border: 1px solid var(--border-color);
    padding: 1rem;
    position: sticky;
    top: calc(var(--header-height) + 1.5rem);
}
.admin-sidebar a {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem 1rem;
    border-radius: var(--border-radius);
    color: var(--text-muted-color);
    font-weight: 500;
    cursor: pointer;
    transition: all var(--transition-speed);
}
.admin-sidebar a:hover {
    background-color: var(--bg-color);
    color: var(--text-color);
}
.admin-sidebar a.active {
    background-color: var(--accent-color);
    color: var(--accent-text-color);
    font-weight: 700;
}
.admin-main-content {
    flex: 1;
    min-width: 0;
}
.admin-section-content { display: flex; flex-direction: column; gap: 1.5rem; }
.admin-section-header { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem; padding-bottom: 1rem; border-bottom: 1px solid var(--border-color); margin-bottom: 1rem; }
.admin-section-header h3 { margin: 0; font-size: 1.5rem; }
.admin-add-btn { display: flex; align-items: center; gap: 0.5rem; }

.admin-items-grid { display: grid; gap: 1.5rem; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); }
.admin-item-card {
    background: var(--bg-secondary-color); border: 1px solid var(--border-color); border-radius: var(--border-radius);
    display: flex; flex-direction: column; overflow: hidden; position: relative;
    box-shadow: var(--shadow-sm); transition: all var(--transition-speed);
}
.admin-item-card:hover { transform: translateY(-4px); box-shadow: var(--shadow-md); }
.admin-item-image { width: 100%; object-fit: cover; aspect-ratio: 16/10; background-color: var(--border-color); }
.teachers-grid .admin-item-image { aspect-ratio: 1/1; }
.books-grid .admin-item-image { aspect-ratio: 2/3; }
.class-card { flex-direction: row; align-items: center; padding: 1rem; background-color: var(--card-bg); }
.review-badge-admin { position: absolute; top: 0; right: 0; background-color: var(--info-color); color: #fff; padding: 0.25rem 0.75rem; border-radius: 0 0 0 var(--border-radius); font-size: 0.8rem; font-weight: 700; }
.admin-item-info { padding: 1rem; flex-grow: 1; }
.class-card .admin-item-info { padding: 0 1rem 0 0; }
.admin-item-info h4 { margin: 0 0 0.25rem; font-size: 1.1rem; }
.admin-item-info p { margin: 0; font-size: 0.9rem; }
.admin-item-info small { font-size: 0.85rem; color: var(--accent-color); }
.admin-item-controls { display: flex; gap: 0.5rem; padding: 0.5rem; background-color: var(--bg-color); border-top: 1px solid var(--border-color); }
.class-card .admin-item-controls { background: none; border-top: none; padding: 0; position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); }
.admin-item-controls button, .admin-item-controls a {
    background: var(--bg-secondary-color); border: 1px solid var(--border-color);
    width: 32px; height: 32px; border-radius: 50%;
    cursor: pointer; display: flex; align-items: center; justify-content: center;
    font-size: 0.9rem; color: var(--text-muted-color);
}
.admin-download-btn { font-size: 1rem !important; }

/* Admin Modal & Search */
.admin-modal { max-width: 600px; }
.admin-form { display: flex; flex-direction: column; gap: 1rem; }
.admin-form input, .admin-form textarea, .admin-form select {
    width: 100%; padding: 0.8rem 1rem; background-color: var(--bg-color);
    border: 1px solid var(--border-color); border-radius: var(--border-radius);
    color: var(--text-color); font-family: var(--font-family); font-size: 1rem;
}
.admin-form label { font-weight: 500; margin-bottom: 0.5rem; display: block; }

.admin-search-form { display: flex; gap: 1rem; margin-bottom: 1.5rem; }
.admin-search-form input { flex-grow: 1; }
.student-search-results { display: flex; flex-direction: column; gap: 2rem; }
.student-details-card p { margin: 0.5rem 0; font-size: 1rem; }
.student-details-card p strong { color: var(--text-color); margin-left: 0.5rem; }
.student-bookings-list { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; }
.booking-card { background-color: var(--bg-color); border: 1px solid var(--border-color); border-radius: var(--border-radius-lg); padding: 1.5rem; }
.booking-card-header { display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem; }
.booking-card h4 { margin: 0; }

.bookings-table-container { overflow-x: auto; background-color: var(--card-bg); border: 1px solid var(--border-color); border-radius: var(--border-radius-lg); }
.bookings-table { width: 100%; border-collapse: collapse; font-size: 0.9rem; }
.bookings-table th, .bookings-table td { padding: 1rem; text-align: right; border-bottom: 1px solid var(--border-color); }
.bookings-table thead { background-color: var(--bg-color); }
.bookings-table tbody tr:hover { background-color: var(--bg-color); }
.bookings-table tbody tr:last-child td { border-bottom: none; }
.booking-type-badge { padding: 0.25rem 0.75rem; border-radius: var(--border-radius-pill); font-size: 0.8rem; font-weight: 700; }
.booking-type-badge.class { background-color: color-mix(in srgb, var(--info-color) 15%, transparent); color: var(--info-color); }
.booking-type-badge.trip { background-color: color-mix(in srgb, #f6ad55 15%, transparent); color: #f6ad55; }

/* --- PROFILE PAGE --- */
.profile-page .page-container { max-width: 1000px; }
.profile-header {
    text-align: center;
    padding-bottom: 1.5rem;
    margin-bottom: 2rem;
    border-bottom: 1px solid var(--border-color);
}
.profile-avatar-container {
    position: relative;
    width: 120px;
    height: 120px;
    margin: 0 auto 1rem;
}
.profile-avatar-large {
    width: 120px; height: 120px; font-size: 3.5rem; border: 4px solid var(--bg-color);
    box-shadow: var(--shadow-md);
}
.avatar-edit-btn {
    position: absolute; bottom: 0; left: 0;
    width: 36px; height: 36px; border-radius: 50%;
    background: var(--accent-color); color: var(--accent-text-color);
    border: 2px solid var(--bg-secondary-color);
    cursor: pointer; display: flex; align-items: center; justify-content: center;
}
.profile-header h1 { font-size: 2rem; margin-bottom: 0.25rem; }
.profile-header p { margin: 0; }
.profile-header-actions { margin-top: 1rem; }
.profile-details-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 2rem; align-items: flex-start; }
.info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; }
.info-item span { display: block; font-size: 0.9rem; color: var(--text-muted-color); margin-bottom: 0.25rem; }
.info-item input {
    width: 100%; padding: 0.5rem 0; font-size: 1rem;
    background: transparent; border: none; border-bottom: 1px solid var(--border-color);
    color: var(--text-color); font-family: var(--font-family);
    transition: all var(--transition-speed);
}
.info-item input:read-only {
    border-bottom-color: transparent;
    padding-left: 0; padding-right: 0;
}
.info-grid.editing .info-item input:read-only {
    background-color: var(--bg-color);
    color: var(--text-muted-color);
    cursor: not-allowed;
}
.info-grid.editing .info-item input:not(:read-only) {
    background-color: var(--bg-color);
    border-radius: var(--border-radius);
    padding: 0.75rem;
    border-color: var(--border-color);
}
.info-grid.editing .info-item input:not(:read-only):focus {
    outline: none; border-color: var(--accent-color);
}

.bookings-list { display: flex; flex-direction: column; gap: 1rem; }
.booking-list-item { display: flex; align-items: center; gap: 1rem; padding: 0.75rem; background: var(--bg-color); border-radius: var(--border-radius); }
.booking-type-dot { width: 10px; height: 10px; border-radius: 50%; flex-shrink: 0; }
.booking-type-dot.class { background-color: var(--info-color); }
.booking-type-dot.trip { background-color: #f6ad55; }
.booking-item-details h4 { font-size: 1rem; margin-bottom: 0.1rem; }
.booking-item-details p { font-size: 0.85rem; margin: 0; }

/* --- TOAST NOTIFICATIONS --- */
.toast-notification {
  position: fixed; top: 1.5rem; left: 50%;
  transform: translate(-50%, -200%); z-index: 3000;
  display: flex; align-items: center; gap: 1rem; padding: 1rem 1.5rem;
  border-radius: var(--border-radius); box-shadow: var(--shadow-lg); color: #fff;
  font-weight: 500; transition: transform 0.5s cubic-bezier(0.25, 1, 0.5, 1);
}
.toast-notification.show { transform: translate(-50%, 0); }
.toast-notification.success { background-color: var(--success-color); }
.toast-notification.error { background-color: var(--error-color); }
.toast-notification.info { background-color: var(--info-color); }
.toast-notification p { margin: 0; color: #fff; }
.toast-close-btn { background: none; border: none; color: #fff; opacity: 0.7; font-size: 1.2rem; cursor: pointer; padding: 0 0 0 1rem; }

/* --- BUTTONS --- */
.btn {
  padding: 0.7rem 1.5rem; font-size: 1rem; font-weight: 700;
  border-radius: var(--border-radius); border: 1px solid transparent; cursor: pointer;
  transition: all var(--transition-speed); font-family: var(--font-family);
  display: inline-flex; align-items: center; justify-content: center; gap: 0.5rem;
}
.btn:hover:not(:disabled) { transform: translateY(-2px); }
.btn-primary { background-color: var(--accent-color); color: var(--accent-text-color); }
.btn-primary:hover:not(:disabled) { background-color: var(--accent-hover-color); box-shadow: 0 4px 10px rgba(var(--accent-rgb), 0.3); }
.btn-secondary { background-color: var(--bg-color); color: var(--text-color); border-color: var(--border-color); }
.btn-secondary:hover:not(:disabled) { background-color: var(--border-color); }
.btn-danger { background-color: var(--error-color); color: #fff; }


/* --- NOTIFICATIONS PANEL --- */
.notifications-wrapper { position: relative; }
.notification-badge {
    position: absolute; top: 4px; right: 4px; background-color: var(--error-color); color: white;
    width: 20px; height: 20px; border-radius: 50%; font-size: 0.75rem; font-weight: 700;
    display: flex; align-items: center; justify-content: center; border: 2px solid var(--card-bg);
}
.notifications-panel {
    position: absolute; top: calc(100% + 1rem); left: 0; width: 350px;
    background-color: var(--bg-secondary-color); border-radius: var(--border-radius-lg);
    box-shadow: var(--shadow-lg); border: 1px solid var(--border-color); z-index: 1100;
    overflow: hidden; display: flex; flex-direction: column; animation: fadeIn 0.2s ease-out;
}
.notifications-header { display: flex; justify-content: space-between; align-items: center; padding: 1rem; border-bottom: 1px solid var(--border-color); }
.notifications-header h3 { margin: 0; font-size: 1.1rem; }
.notifications-header button { background: none; border: none; color: var(--accent-color); font-size: 0.85rem; cursor: pointer; }
.notifications-list { max-height: 400px; overflow-y: auto; }
.notification-item { display: flex; gap: 1rem; padding: 1rem; border-bottom: 1px solid var(--border-color); cursor: pointer; }
.notification-item:hover { background-color: var(--bg-color); }
.notification-item.read { opacity: 0.6; }
.notification-content p { margin: 0 0 0.25rem; font-size: 0.9rem; color: var(--text-color); }
.notification-content small { font-size: 0.8rem; color: var(--text-muted-color); }

/* --- STATIC & CONTENT PAGES --- */
.teachers-page .teachers-grid { grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); }
.teacher-card { text-align: center; cursor: pointer; transition: all var(--transition-speed); padding: 1.5rem; }
.teacher-card:hover { transform: translateY(-5px); box-shadow: var(--shadow-lg); }
.teacher-card-image { width: 120px; height: 120px; border-radius: 50%; object-fit: cover; margin: 0 auto 1rem; }
.teacher-card-info h3 { margin: 0.5rem 0 0.25rem; }
.teacher-card-info p { color: var(--accent-color); margin: 0; }

.gallery-page .gallery-grid-full { grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); }
.gallery-grid-item { position: relative; border-radius: var(--border-radius); overflow: hidden; cursor: pointer; aspect-ratio: 4/3; background-color: var(--border-color); }
.gallery-grid-item img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.4s ease; }
.gallery-grid-item:hover img { transform: scale(1.05); }
.gallery-item-caption { position: absolute; bottom: 0; left: 0; right: 0; padding: 1.5rem 1rem 1rem; background: linear-gradient(to top, rgba(0,0,0,0.8), transparent); color: white; transform: translateY(100%); transition: transform var(--transition-speed); }
.gallery-grid-item:hover .gallery-item-caption { transform: translateY(0); }

.trips-page .trips-grid { grid-template-columns: 1fr; }
.trip-card { display: flex; gap: 2rem; }
.trip-card-image-carousel { flex: 0 0 300px; border-radius: var(--border-radius); overflow: hidden; }
.trip-card-image-carousel img { width: 100%; height: 100%; object-fit: cover; }
.trip-card-content { display: flex; flex-direction: column; }
.trip-card-content h3 { font-size: 1.75rem; margin-bottom: 1rem; }
.trip-card-details { display: flex; flex-direction: column; gap: 0.5rem; margin-bottom: 1rem; color: var(--text-muted-color); }
.book-trip-btn { margin-top: auto; align-self: flex-start; }

.schedule-page .month-group { margin-bottom: 2rem; }
.schedule-page .month-header { font-size: 1.5rem; padding-bottom: 0.5rem; border-bottom: 1px solid var(--border-color); margin-bottom: 1.5rem; }
.schedule-list { display: flex; flex-direction: column; gap: 1rem; }
.schedule-list-item { display: flex; align-items: center; gap: 1.5rem; padding: 1rem; background-color: var(--card-bg); border-radius: var(--border-radius); border: 1px solid var(--border-color); transition: all var(--transition-speed); cursor: pointer; }
.schedule-list-item:hover { border-color: var(--accent-color); box-shadow: var(--shadow-md); transform: translateX(5px); }
.schedule-date-badge { text-align: center; border-left: 1px solid var(--border-color); padding-left: 1.5rem; }
.schedule-date-badge .day-name { font-size: 0.9rem; color: var(--text-muted-color); }
.schedule-date-badge .day-number { display: block; font-size: 1.75rem; font-weight: 700; color: var(--accent-color); }
.schedule-item-details { flex-grow: 1; }
.schedule-item-details h3 { font-size: 1.2rem; margin-bottom: 0.25rem; }
.schedule-item-details p, .schedule-item-details span { margin: 0; }
.schedule-item-tags { display: flex; gap: 0.5rem; }
.tag { font-size: 0.8rem; font-weight: 700; padding: 0.25rem 0.75rem; border-radius: var(--border-radius-pill); }
.tag.review { background-color: color-mix(in srgb, var(--info-color) 15%, transparent); color: var(--info-color); }
.tag.bookable { background-color: color-mix(in srgb, var(--success-color) 15%, transparent); color: var(--success-color); }

.books-page .books-grid { grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); }
.book-card-image { aspect-ratio: 2/3; object-fit: cover; background: var(--border-color); }
.book-card-content { padding: 1rem; display: flex; flex-direction: column; flex-grow: 1; }
.book-card-content h3 { font-size: 1.1rem; margin-bottom: 0.5rem; }
.book-card-content p { font-size: 0.9rem; margin-bottom: 1rem; flex-grow: 1; }
.download-btn { width: 100%; }

.exams-page .exams-list { grid-template-columns: 1fr; }
.exam-card { display: flex; justify-content: space-between; align-items: center; gap: 1rem; }
.exam-card.completed { opacity: 0.7; background-color: var(--bg-color); }
.exam-card-info h3 { margin-bottom: 0.25rem; }
.exam-score { text-align: center; }
.exam-score span { display: block; font-size: 0.9rem; color: var(--text-muted-color); }
.exam-score strong { font-size: 1.5rem; color: var(--accent-color); }

.static-page .static-content { line-height: 1.8; }
.static-page .form-section-title { font-size: 1.5rem; margin-top: 2rem; margin-bottom: 1rem; color: var(--accent-color); border: none; padding: 0; }

.stats-page .stats-grid { grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); }
.stat-card { text-align: center; }
.stat-card.wide { grid-column: span 2; }
.stat-card h4 { font-size: 1rem; color: var(--text-muted-color); margin-bottom: 0.5rem; }
.stat-card p { font-size: 2.5rem; font-weight: 900; color: var(--accent-color); margin: 0; }

.unauthorized-page { text-align: center; font-size: 1.5rem; padding: 4rem 2rem; }

/* --- RESPONSIVE DESIGN --- */
@media (max-width: 1024px) {
    .app-container:not(.is-public-view) .main-content {
        margin-right: 0;
    }
    .app-header {
        left: 0;
    }
    .header-icon-btn[aria-label="Open menu"] {
        display: flex;
    }
    .sidebar {
        transform: translateX(100%);
    }
    .sidebar.open {
        transform: translateX(0);
        box-shadow: -5px 0 15px rgba(0,0,0,0.1);
    }
    .sidebar-close-btn { display: flex; }
    .admin-layout { flex-direction: column; }
    .admin-sidebar { position: static; width: 100%; }
}

@media (max-width: 768px) {
    .page-container { padding: 1rem; }
    .main-page-title { font-size: 1.75rem; }
    .auth-container { flex-direction: column; min-height: 0; }
    .auth-branding { display: none; }
    .auth-form-container { padding: 1.5rem; }
    .profile-details-grid { grid-template-columns: 1fr; }
    .info-grid { grid-template-columns: 1fr; }
    .trip-card { flex-direction: column; }
    .register-form .form-grid { grid-template-columns: 1fr; }
    .gallery-preview-grid { grid-template-columns: 1fr 1fr; }
}

@media (max-width: 480px) {
    :root { --header-height: 60px; }
    .main-content { padding-top: calc(var(--header-height) + 1rem); }
    .header-title { display: none; }
    .app-header { padding: 0 1rem; }
    .fab { bottom: 1rem; left: 1rem; width: 50px; height: 50px; }
    .day-card { flex: 0 0 calc(100% - 1rem); }
    .modal-container { width: 100%; max-width: calc(100vw - 2rem); margin: 1rem; }
    .content-section-title { font-size: 1.5rem; }
    .profile-avatar-large { width: 90px; height: 90px; font-size: 2.5rem; }
    .profile-header h1 { font-size: 1.5rem; }
}
